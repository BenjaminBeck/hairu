config.tx_extbase {
  persistence {
    classes {
      PAGEmachine\Hairu\Domain\Model\FrontendUser {
        mapping {
          tableName = fe_users
        }
      }
    }
  }
}

plugin.tx_hairu {
  features {
    skipDefaultArguments = 1
  }

  legacy {
    enableLegacyFlashMessageHandling = 0
  }

  view {
    templateRootPaths.0 = {$plugin.tx_hairu.view.templateRootPath}
    partialRootPaths.0 = {$plugin.tx_hairu.view.partialRootPath}
    layoutRootPaths.0 = {$plugin.tx_hairu.view.layoutRootPath}
  }

  settings {
    userStoragePage = {$plugin.tx_hairu.settings.userStoragePage}
    passwordReset {
      page = {$plugin.tx_hairu.settings.passwordReset.page}

      token {
        lifetime = {$plugin.tx_hairu.settings.passwordReset.token.lifetime}
      }

      mail {
        subject = {$plugin.tx_hairu.settings.passwordReset.mail.subject}
        from = {$plugin.tx_hairu.settings.passwordReset.mail.from}
      }
    }
  }

  mvc.validation {
    // Validation of Login controller action arguments
    Login {
      startPasswordReset {
        username {
          1 {
            type = PAGEmachine.Hairu:ValidFrontendUserValidator
            options {
              property = username
            }
          }
        }
      }
    }
  }
}
